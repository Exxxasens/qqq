(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),a=n(26),c=n.n(a),i=(n(60),n(17)),l=n(8),o=(n(65),n(0)),u=Object(l.b)((function(e){return console.log(e),{username:e.username}}))((function(e){var t=e.username;return console.log("menu component"),Object(o.jsxs)("div",{className:"menu",children:[Object(o.jsxs)("h1",{children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",t]}),Object(o.jsxs)("div",{className:"list",children:[Object(o.jsx)("div",{className:"item",children:Object(o.jsx)(i.b,{to:"/me",activeClassName:"selected",children:"\u041c\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})}),Object(o.jsx)("div",{className:"item",children:Object(o.jsx)(i.b,{to:"/create",activeClassName:"selected",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u0433\u0440\u0443"})}),Object(o.jsx)("div",{className:"item",children:Object(o.jsx)(i.b,{to:"/game/connect",activeClassName:"selected",children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0438\u0433\u0440\u0435"})}),Object(o.jsx)("div",{className:"item",children:Object(o.jsx)(i.b,{to:"/logout",activeClassName:"selected",children:"\u0412\u044b\u0445\u043e\u0434"})})]})]})})),j=n(3),d=(n(68),n(10)),b=n(4),h=n(54),O=n.n(h),m=(n(99),function(e){var t=e.field,n=e.isUserFirstPlayer,r=e.isUserSecondPlayer,s=e.onCellClick,a=e.nextStep,c=e.gameStatus,i=function(e){var t=e.onClick,s=e.value,i=["cell"],l=null;return s||i.push("empty"),n&&1===a&&!s&&"started"===c&&i.push("step"),r&&2===a&&!s&&"started"===c&&i.push("step"),1===s&&(l="X"),2===s&&(l="O"),Object(o.jsx)("div",{className:i.join(" "),onClick:t,children:l})},l=function(e){var t=e.row,n=e.handleClick;return console.log(t),Object(o.jsx)("div",{className:"row",children:t.map((function(e,t){return Object(o.jsx)(i,{onClick:function(){return n(t)},value:e})}))})};return Object(o.jsx)("div",{className:"field",children:t.map((function(e,t){return Object(o.jsx)(l,{row:e,handleClick:function(e){return s(t,e)}})}))})}),p=(n(100),function(){return Object(o.jsx)("div",{className:"loading-wrapper",children:Object(o.jsx)("div",{className:"loadingio-spinner-dual-ring-drwpaa1s9x6",children:Object(o.jsxs)("div",{className:"ldio-of4mr6z053l",children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{children:Object(o.jsx)("div",{})})]})})})}),f=(n(101),function(e){var t=e.game;if(!t||!t.hasOwnProperty("status"))return null;var n=t.status;return"started"===n?Object(o.jsx)("div",{className:"game-info",children:Object(o.jsxs)("h1",{children:[" \u0425\u043e\u0434 \u0438\u0433\u0440\u043e\u043a\u0430 ",function(){var e=t.next_step,n=t.first_player,r=t.second_player;return 1===e?n:r}()," "]})}):"finished"===n?Object(o.jsx)("div",{className:"game-info",children:Object(o.jsx)("h1",{children:function(){var e=t.winner,n=t.score;return t.status,1===e?"\u041f\u043e\u0431\u0435\u0434\u0438\u043b \u0438\u0433\u0440\u043e\u043a "+t.first_player+", \u0441\u043e \u0441\u0447\u0435\u0442\u043e\u043c: "+n:2===e?"\u041f\u043e\u0431\u0435\u0434\u0438\u043b \u0438\u0433\u0440\u043e\u043a "+t.second_player+", \u0441\u043e \u0441\u0447\u0435\u0442\u043e\u043c: "+n:"\u041d\u0438\u0447\u044c\u044f"}()})}):null}),x=function(e){var t=e.game,n=function(){var e=t.line_to_win,n=t.multiple_lines,r=t._id;return Object(o.jsxs)("div",{className:"settings",children:[Object(o.jsx)("div",{children:"\u0418\u0433\u0440\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:"}),Object(o.jsxs)("div",{className:"settings-list",children:[Object(o.jsxs)("div",{children:["\u041d\u043e\u043c\u0435\u0440 \u0438\u0433\u0440\u044b: ",r]}),Object(o.jsxs)("div",{children:["\u0420\u0430\u0437\u043c\u0435\u0440 \u043b\u0438\u043d\u0438\u0438: ",e]}),Object(o.jsxs)("div",{children:["\u0421\u043e\u0431\u0440\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u043b\u0438\u043d\u0438\u0439: ",n?"\u0414\u0430":"\u041d\u0435\u0442"]})]})]})},r=t.first_player,s=t.second_player;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f,{}),Object(o.jsx)(n,{}),Object(o.jsxs)("div",{className:"players",children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"title",children:"\u0418\u0433\u0440\u043e\u043a 1:"}),Object(o.jsx)("div",{className:"name",children:r})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"title",children:"\u0418\u0433\u0440\u043e\u043a 2:"}),Object(o.jsx)("div",{className:"name",children:s||"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0438\u0433\u0440\u043e\u043a\u0430"})]})]})]})},v=Object(l.b)((function(e){return{username:e.username,userId:e.userId,token:e.token}}))((function(e){var t=e.userId,n=e.token,r=e.username,a=Object(j.h)().id,c=Object(j.g)(),i=s.a.useState(null),l=Object(b.a)(i,2),u=l[0],h=l[1],v=s.a.useState(null),g=Object(b.a)(v,2),N=g[0],w=g[1],k=s.a.useState(null),y=Object(b.a)(k,2),_=y[0],S=y[1],C=s.a.useState(!0),I=Object(b.a)(C,2),E=I[0],T=I[1],P=u&&u.hasOwnProperty("first_player")&&u.first_player===r,U=u&&u.hasOwnProperty("second_player")&&u.second_player===r,L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.log("game_update",e),h((function(t){return t||(t={}),Object(d.a)(Object(d.a)({},t),e)}))},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("game_data",e),h(e),T(!1)},F=function(e){S(e)};if(s.a.useEffect((function(){var e=O()();w(e);var t=window.localStorage.getItem("token");return e.on("join_game_announcement",(function(e){console.log("user connected to game",e)})),e.on("leave_game_announcement",(function(e){return console.log("leave_game_announcement",e)})),e.on("game_update",L),e.on("game_data",M),e.on("error",F),e.emit("join_game",{token:t,game_id:a}),function(){e.emit("leave_game",{token:t,game_id:a})}}),[a]),E&&!_)return Object(o.jsx)(p,{});if(_)return Object(o.jsx)("div",{className:"game",children:Object(o.jsx)("div",{className:"error",children:_})});var R=u.field,z=u.next_step,H=u.status;return _&&_.message,Object(o.jsxs)("div",{className:"game-wrapper",children:[Object(o.jsx)(f,{game:u}),Object(o.jsxs)("div",{className:"game",children:[Object(o.jsx)(x,{game:u}),Object(o.jsx)(m,{field:R,nextStep:z,onCellClick:function(e,r){var s=u.next_step;(1===s&&P||2===s&&U)&&(console.log({game_id:a,token:t,y:e,x:r}),N.emit("step",{game_id:a,token:n,y:e,x:r}))},isUserFirstPlayer:P,isUserSecondPlayer:U,gameStatus:H}),Object(o.jsx)("div",{className:"btn-wrapper",children:Object(o.jsx)("button",{onClick:function(){c.push("/")},children:"\u0412\u044b\u0445\u043e\u0434"})})]})]})})),g=function(e){var t=s.a.useMemo((function(){return{data:null,status:"loading"}}),[]),n=s.a.useState(t),r=Object(b.a)(n,2),a=r[0],c=r[1];return s.a.useEffect((function(){var n=!1;return c(t),e().then((function(e){return n?null:c({data:e,status:"ok"})})).catch((function(e){return c({data:e,status:"error"})})),function(){n=!0}}),[e,t]),a},N=n(11),w=n.n(N),k=n(20),y=n(55),_=new function e(){var t=this;Object(y.a)(this,e),this.token=void 0,this.fetchResource=function(){var e=Object(k.a)(w.a.mark((function e(n,r){var s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),e.next=3,fetch(n,r);case 3:return s=e.sent,e.abrupt("return",t.handleNetworkErrors(s));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.handleNetworkErrors=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,r,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw new Error(t.statusText);case 2:return e.next=4,t.json();case 4:if(n=e.sent,r=n.error,s=n.result,!r){e.next=10;break}throw"\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u0435\u043d"===s&&(console.log("token deleted"),localStorage.clear()),new Error(s);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.login=function(){var e=Object(k.a)(w.a.mark((function e(n,r){var s,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={username:n,password:r},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},e.next=4,t.fetchResource("/api/login",a);case 4:return c=e.sent,t.token=c,window.localStorage.setItem("token",c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.register=function(){var e=Object(k.a)(w.a.mark((function e(n,r){var s,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={username:n,password:r},a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},e.abrupt("return",t.fetchResource("/api/register",a));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.fetchWithToken=function(){var e=Object(k.a)(w.a.mark((function e(n){var r,s,a=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},n){e.next=3;break}throw new Error("Url is required parameter");case 3:return s="Bearer "+t.token,r.hasOwnProperty("headers")?r.headers.Authorization=s:r.headers={Authorization:s},e.abrupt("return",t.fetchResource(n,r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMe=function(){return t.fetchWithToken("api/user/me",{method:"POST"})};var n=window.localStorage.getItem("token")||"";this.token=n},S=s.a.createContext(_),C=(n(103),function(e){var t=e.first_step,n=void 0===t?1:t,r=e.size,a=void 0===r?3:r,c=e.line_to_win,i=e.multiple_lines,l=s.a.useContext(S),u=s.a.useCallback((function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_step:n,size:a,line_to_win:c,multiple_lines:i})};return l.fetchWithToken("/api/game/create",e)}),[l,n,a,c,i]),d=g(u),b=d.data,h=d.status;if("ok"===h){var O="/game/".concat(b);return Object(o.jsx)(j.a,{to:O})}return"error"===h?Object(o.jsx)("div",{children:"Error"}):"loading"===h?Object(o.jsx)(p,{}):void 0}),I=function(){var e=s.a.useState(3),t=Object(b.a)(e,2),n=t[0],r=t[1],a=s.a.useState(3),c=Object(b.a)(a,2),i=c[0],l=c[1],u=s.a.useState(!1),j=Object(b.a)(u,2),d=j[0],h=j[1],O=s.a.useState(3),m=Object(b.a)(O,2),p=m[0],f=m[1],x=s.a.useState(!0),v=Object(b.a)(x,2),g=v[0],N=v[1];return d?Object(o.jsx)(C,{size:n,first_step:i,line_to_win:p,multiple_lines:g}):Object(o.jsxs)("div",{className:"create-game",children:[Object(o.jsx)("h1",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0439 \u0438\u0433\u0440\u044b"}),Object(o.jsx)("div",{className:"discription",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u0433\u0440\u044b."}),Object(o.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault(),h(!0)},children:[Object(o.jsxs)("div",{className:"input-wrapper",children:[Object(o.jsx)("label",{htmlFor:"field-size",children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044f:"}),Object(o.jsx)("input",{id:"field-size",type:"number",value:n,onChange:function(e){if(e.target instanceof HTMLInputElement){var t=parseInt(e.target.value);if(!t||t>10||t<3)return;return p>t&&f(t),r(t)}}})]}),Object(o.jsxs)("div",{className:"input-wrapper",children:[Object(o.jsx)("label",{htmlFor:"first-step",children:"\u041f\u0435\u0440\u0432\u044b\u0439 \u0445\u043e\u0434:"}),Object(o.jsxs)("select",{id:"first-step",onChange:function(e){if(e.target instanceof HTMLSelectElement){var t=parseInt(e.target.value);t>0&&t<4&&l(t)}},value:i,children:[Object(o.jsx)("option",{value:"1",children:"X"}),Object(o.jsx)("option",{value:"2",children:"O"}),Object(o.jsx)("option",{value:"3",children:"\u0420\u0430\u043d\u0434\u043e\u043c\u043d\u043e"})]})]}),Object(o.jsxs)("div",{className:"input-wrapper",children:[Object(o.jsx)("label",{htmlFor:"line-to-win",children:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043b\u0438\u043d\u0438\u0438:"}),Object(o.jsx)("input",{id:"line-to-win",type:"number",value:p,onChange:function(e){if(e.target instanceof HTMLInputElement){var t=parseInt(e.target.value);if(!t)return;return f(t>n?n:t<2?2:t)}}})]}),Object(o.jsxs)("div",{className:"input-wrapper",children:[Object(o.jsx)("label",{htmlFor:"mul-line",children:"\u0423\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u043e\u0431\u0435\u0434\u044b:"}),Object(o.jsxs)("select",{id:"mul-line",onChange:function(e){if(e.target instanceof HTMLSelectElement){var t=e.target.value;"true"===t&&N(!0),"false"===t&&N(!1)}},value:String(g),children:[Object(o.jsx)("option",{value:"true",children:"\u0421\u043e\u0431\u0440\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u043b\u0438\u043d\u0438\u0439"}),Object(o.jsx)("option",{value:"false",children:"\u0421\u043e\u0431\u0440\u0430\u0442\u044c \u043b\u0438\u043d\u0438\u044e \u043f\u0435\u0440\u0432\u044b\u043c"})]})]}),Object(o.jsx)("div",{className:"submit-btn-wrapper",children:Object(o.jsx)("button",{type:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})]})},E=(n(104),Object(l.b)(null,(function(e){return{login:function(t){return e(function(e){return{type:"USER_LOGIN",payload:{token:e}}}(t))}}}))((function(e){var t=e.login,n=s.a.useContext(S),r=s.a.useState(""),a=Object(b.a)(r,2),c=a[0],i=a[1],l=s.a.useState(""),u=Object(b.a)(l,2),j=u[0],d=u[1],h=s.a.useState(!1),O=Object(b.a)(h,2),m=O[0],p=O[1],f=s.a.useState(null),x=Object(b.a)(f,2),v=x[0],g=x[1],N=s.a.useState("login"),w=Object(b.a)(N,2),k=w[0],y=w[1];s.a.useEffect((function(){i(""),d(""),g(null)}),[k]);return Object(o.jsx)("div",{className:"login-page-wrapper",children:Object(o.jsxs)("div",{className:"login-page",children:[Object(o.jsx)("div",{className:"header",children:Object(o.jsxs)("h1",{children:["login"===k&&"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f","register"===k&&"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"]})}),Object(o.jsxs)("div",{className:"description",children:[Object(o.jsx)("p",{children:"\u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f."}),Object(o.jsxs)("p",{children:["\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f ","register"===k?"\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438":"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438","."]})]}),Object(o.jsxs)("form",{className:"login-form",onSubmit:function(e){if(e.preventDefault(),!m)return"register"===k?j.length<6?g("\u041f\u0430\u0440\u043e\u043b\u044c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"):c.length<4?g("\u041d\u0438\u043a\u043d\u0435\u0439\u043c \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439. \u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 4 \u0441\u0438\u043c\u0432\u043e\u043b\u0430."):(p(!0),g(null),n.register(c,j).then((function(){g("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"),p(!1)})).catch((function(e){g(e.message),p(!1)}))):void(c.length>0&&j.length>0&&(p(!0),g(null),n.login(c,j).then((function(e){p(!1),g(null),t(e)})).catch((function(e){g(e.message),p(!1)}))))},children:[Object(o.jsxs)("div",{className:"username-input-wrapper",children:[Object(o.jsx)("div",{className:"label-wrapper",children:Object(o.jsx)("label",{className:"username-label",children:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c"})}),Object(o.jsx)("div",{className:"input-wrapper",children:Object(o.jsx)("input",{className:"username-input",type:"text",name:"username",onChange:function(e){if(e.target instanceof HTMLInputElement){var t=e.target.value;i(t)}},value:c})})]}),Object(o.jsxs)("div",{className:"password-input-wrapper",children:[Object(o.jsx)("div",{className:"label-wrapper",children:Object(o.jsx)("label",{className:"password-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"})}),Object(o.jsx)("div",{className:"input-wrapper",children:Object(o.jsx)("input",{className:"password-input",type:"password",name:"username",onChange:function(e){if(e.target instanceof HTMLInputElement){var t=e.target.value;d(t)}},value:j})})]}),v&&Object(o.jsx)("div",{className:"error",children:v}),Object(o.jsx)("div",{className:"submit-btn-wrapper",children:Object(o.jsx)("button",{type:"submit",className:"submit-btn",disabled:m,children:"register"===k?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u043e\u0439\u0442\u0438"})})]}),"login"===k&&Object(o.jsxs)("div",{className:"switch",children:["\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?",Object(o.jsx)("button",{onClick:function(){return y("register")},className:"switch-btn",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),"register"===k&&Object(o.jsxs)("div",{className:"switch",children:["\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",Object(o.jsx)("button",{onClick:function(){return y("login")},className:"switch-btn",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}))),T=Object(l.b)((function(e){return{username:e.username,userId:e.userId}}),(function(e){return{logout:function(){return e({type:"USER_LOGOUT",payload:{}})}}}))((function(e){var t=e.logout,n=e.userId;return s.a.useEffect((function(){t()}),[]),n?null:(console.log("no user id"),Object(o.jsx)(j.a,{to:"/"}))})),P=(n(105),function(){var e=Object(j.g)(),t=s.a.useState(""),n=Object(b.a)(t,2),r=n[0],a=n[1];return Object(o.jsx)("div",{className:"connect",children:Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r.length>0&&e.push("/game/".concat(r))},children:[Object(o.jsxs)("div",{className:"input-wrapper",children:[Object(o.jsx)("label",{htmlFor:"game-id",children:"\u041d\u043e\u043c\u0435\u0440 \u0438\u0433\u0440\u044b:"}),Object(o.jsx)("input",{id:"game-id",type:"text",value:r,onChange:function(e){if(e.target instanceof HTMLInputElement){var t=e.target.value;a(t)}}})]}),Object(o.jsx)("div",{className:"btn-wrapper",children:Object(o.jsx)("button",{className:"connect-btn",type:"submit",children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f"})})]})})}),U=(n(106),function(){var e=s.a.useContext(S),t=s.a.useCallback((function(){return e.getMe()}),[]),n=g(t),r=n.data,a=n.status;if("error"===a)return Object(o.jsxs)("div",{className:"error",children:[Object(o.jsx)("h1",{children:"\u041e\u0448\u0438\u0431\u043a\u0430"}),Object(o.jsx)("div",{children:r})]});if("loading"===a)return Object(o.jsx)(p,{});if("ok"===a){var c=r.username,i=r.games_played,l=r.won,u=function(){var e,t=null;return t=0===l?Object(o.jsxs)("div",{children:["\u041f\u043e\u0431\u0435\u0434: ",0]}):Object(o.jsxs)("div",{children:["\u041f\u043e\u0431\u0435\u0434: ",l," (",(e=l/i,100*Number(e.toFixed(5))+"%"),")"]}),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["\u0412\u0441\u0435\u0433\u043e \u0438\u0433\u0440 \u0441\u044b\u0433\u0440\u0430\u043d\u043e: ",i]}),t]})};return Object(o.jsx)("div",{className:"account",children:Object(o.jsxs)("div",{children:[Object(o.jsxs)("h1",{children:["\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ",c]}),Object(o.jsx)("div",{className:"stats",children:Object(o.jsx)(u,{})})]})})}}),L=Object(l.b)((function(e){return{userId:e.userId}}))((function(e){var t=e.userId,n=Boolean(t);return Object(o.jsx)(i.a,{children:Object(o.jsx)("div",{className:"app",children:n?Object(o.jsxs)(j.d,{children:[Object(o.jsx)(j.b,{path:"/",exact:!0,children:Object(o.jsx)(u,{})}),Object(o.jsxs)(j.b,{path:"/create",children:[Object(o.jsx)(u,{}),Object(o.jsx)(I,{})]}),Object(o.jsxs)(j.b,{path:"/game/connect",children:[Object(o.jsx)(u,{}),Object(o.jsx)(P,{})]}),Object(o.jsx)(j.b,{path:"/game/:id",exact:!0,children:Object(o.jsx)(v,{})}),Object(o.jsx)(j.b,{path:"/logout",children:Object(o.jsx)(T,{})}),Object(o.jsx)(j.b,{path:"/me",children:Object(o.jsx)(U,{})})]}):Object(o.jsxs)(j.d,{children:[Object(o.jsx)(j.b,{path:"/logout",children:Object(o.jsx)(T,{})}),Object(o.jsx)(j.b,{path:"/",children:Object(o.jsx)(E,{})})]})})})}));function M(e){var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var F=function(e,t){var n={userId:"",username:"",token:""};if(!e){var r=window.localStorage.getItem("token");if(r){var s=M(r),a=s.id,c=s.username;return Object(d.a)(Object(d.a)({},n),{},{userId:a,username:c,token:r})}return Object(d.a)({},n)}switch(t.type){case"USER_LOGIN":var i=t.payload.token,l=M(i),o=l.id,u=l.username;return Object(d.a)(Object(d.a)({},e),{},{userId:o,username:u,token:i});case"USER_LOGOUT":return localStorage.clear(),Object(d.a)(Object(d.a)({},e),{},{userId:null,token:null,username:null});default:return e}},R=n(28),z=Object(R.b)(F),H=document.getElementById("root");c.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(l.a,{store:z,children:Object(o.jsx)(L,{})})}),H)},60:function(e,t,n){},65:function(e,t,n){},68:function(e,t,n){},99:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.62491c68.chunk.js.map